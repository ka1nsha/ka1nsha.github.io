<!DOCTYPE html>
<html lang="tr">
<head>
        <title>Neymiş bu Vagrant</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>
<body>

    <div class="navigation pure-menu pure-menu-horizontal">
        <a href="/" class="pure-menu-heading  pure-menu-link">0x6 | Junior of All</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"></li>

            <li class="pure-menu-item"><a href="/category/ansible.html" class="pure-menu-link">ansible</a></li>
            <li class="pure-menu-item"><a href="/category/python.html" class="pure-menu-link">python</a></li>
            <li class="pure-menu-item pure-menu-selected"><a href="/category/vagrant.html" class="pure-menu-link">vagrant</a></li>
        </ul>
    </div>


<div class="page-container">
    <div class="entry-content">
        <div class="post-meta pure-g">
<div class="pure-u-3-4 meta-data">
    <a href="/category/vagrant.html" class="category">vagrant</a><br />

    <a class="author" href="/author/0x656e.html">0x656e</a>
    &mdash; <abbr title="2018-01-06T22:14:00+02:00">Sat 06 January 2018</abbr>
</div>        </div>
    </div>

    <div class="article-header-container">
        <div class="background-image-container">

            <div class="background-image-small">
                <div class="title-container">
                    <h1>Neymiş bu Vagrant</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="entry-content">
        <h3>Kısaca Vagrant Nedir?</h3>
<p>Kendi anladığım şekilde anlatmam gerekirse Vagrant hazırladığınız text scriptleri ile sanal sunucular oluşturabileceğiniz otomatize bir araçtır. </p>
<h3>Ne İşe Yarar?</h3>
<p>Oluşturduğunuz scriptler ile herhangi bir ortamda (Müşteri ortamı vs.) sizler için hazır bir makine inşa eder. Tabi bir de <a href="https://ka1nsha.github.io/ansible-nginx.html">ansible</a> ile birleştirirseniz tadından yenmez sanırım. Tabi ki bunda özgürsünüz projenizin içerisinde ki bir sh dosyasını da çalıştırabilirsiniz.</p>
<h3>Birkaç Terim</h3>
<p><strong> Provider </strong> : Sisteminizin hangi sanallaştırma platformu üzerinde çalıştırılacağını belirtir. Örn: Virtualbox, Vmware, Docker</p>
<p><strong> Box </strong> : Binlerce kullanıcı tarafından oluşturulmuş özel kutulardır. Bu kutuları scriptiniz içerisine yazarsanız Vagrant bunu sizin için indirir ve script içerisinde belirttiğiniz özellikler üzerinden çalışmasını sağlar. Örnek vermek gerekirse pfsense box'ını indirirseniz sizlere nur topu gibi bir pfsense makinesi verecektir.</p>
<p><strong> Provision </strong> : Sistem kurulduktan sonra çalıştırılacak script vs şeyleri yazdığımız yer ( en azından benim anladığım :D )</p>
<h3>Next, Next, Next</h3>
<p>Debian based sistemler üzerinde</p>
<div class="highlight"><pre><span></span>apt install vagrant
</pre></div>


<p>Tabi ki sadece <strong>vagrant</strong> kurmak yetmeyecektir. Kullanacağınız provider'ı da sisteminize indirmeniz gerekmektedir. Ben <strong>virtualbox</strong> kullanacağım.</p>
<h3>Hadi Başlayalım.</h3>
<p>Projeyi oluşturacağınız klasöre gittiğinizde burada vagrant init yaparsanız sizin için bir <em><strong>vagrantfile</strong></em> oluşacaktır.
İçerisini temizleyerek aşağıda ki satırları ekleyelim.</p>
<div class="highlight"><pre><span></span>Vagrant.configure<span class="o">(</span><span class="m">2</span><span class="o">)</span> <span class="k">do</span> <span class="p">|</span>config<span class="p">|</span>
        config.vm.define <span class="s2">&quot;nebuvagrantya&quot;</span> <span class="k">do</span> <span class="p">|</span>nbv<span class="p">|</span>
        nbv.vm.box <span class="o">=</span> <span class="s2">&quot;ubuntu/trusty64&quot;</span>
        nbv.vm.network :private_network, ip: <span class="s2">&quot;10.0.0.2&quot;</span>
        nbv.vm.hostname <span class="o">=</span> <span class="s2">&quot;nebuvagrantya&quot;</span>
</pre></div>


<p>Burada ki kodları açıklamak gerekirse Vagrant.configure(2) do <strong>|config|</strong> yazdığımızda kalın yazdığım kısım aslında bir değişken olarak davranıyor.</p>
<p>Altında Vagrant üzerinde bir makine açacağımızı ve bunu kısaltma olarak nbv olarak çağıracağımızı belirtiyoruz. ( nbv )</p>
<p>Diğer satırlarda bu makinemizin ubuntu kutusunu kullanacağını belirtiyoruz. Bu kutunun hangi ip alacağını ve private networkde olacağını belirtiyoruz. Ayrıca bu makinenin Virtualbox üzerinde ki ismini de belirtmiş oluyoruz. Fakat bu bize yetiyor mu tabi ki yetmiyor. Hadi biraz daha sanal makinemizin ayarları ile oynayalım.</p>
<p>Projemize provider olarak <strong>virtualbox</strong> ekleyelim. </p>
<div class="highlight"><pre><span></span>Vagrant.configure<span class="o">(</span><span class="m">2</span><span class="o">)</span> <span class="k">do</span> <span class="p">|</span>config<span class="p">|</span>
    config.vm.define <span class="s2">&quot;nebuvagrantya&quot;</span> <span class="k">do</span> <span class="p">|</span>nbv<span class="p">|</span>
    nbv.vm.box <span class="o">=</span> <span class="s2">&quot;ubuntu/trusty64&quot;</span>
    nbv.vm.network :private_network, ip: <span class="s2">&quot;10.0.0.2&quot;</span>
    nbv.vm.hostname <span class="o">=</span> <span class="s2">&quot;nebuvagrantya&quot;</span>

    nbv.vm.provider <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="p">|</span>vb<span class="p">|</span>
        vb.name <span class="o">=</span> <span class="s2">&quot;Ne bu vagrant ya&quot;</span>
        vb.name <span class="o">=</span>  <span class="s2">&quot;Ne bu vagrant ya&quot;</span>
        vb.memory <span class="o">=</span> <span class="s2">&quot;512&quot;</span>
        vb.cpus <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
        vb.customize <span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span>, :id, <span class="s2">&quot;--vram&quot;</span>, <span class="s2">&quot;32&quot;</span><span class="o">]</span>
        end
</pre></div>


<p>Burada VBoxmanage kullanarak sanal makinemizin ismini, ram miktarını, ekran kartı ram miktarını ve işlemci sayısını belirttik. Ayrıca provision kısmında shell üzerinde proje klasörümüzde bulunan <strong>nginxyukle.sh</strong> dosyasını çalıştıracağız.
İsterseniz provisioning kısmında isterseniz direkt olarak ansible çalıştırabilirsiniz.</p>
<p>Örnek kod:</p>
<div class="highlight"><pre><span></span>    vb.vm.provision <span class="s2">&quot;ansible&quot;</span> <span class="k">do</span> <span class="p">|</span>ansible<span class="p">|</span>
        ansible.playbook <span class="o">=</span> <span class="s2">&quot;nginxyukle.yml&quot;</span>
        ansible.verbose <span class="o">=</span> <span class="s2">&quot;v&quot;</span>
end
</pre></div>


<p>Sanal makinenizin çok daha fazla ayarını değiştirmek isterseniz eğer aşağıya referans sayfasını ekleyeceğim.</p>
<p>Vagrant dosyamızın son hali </p>
<div class="highlight"><pre><span></span>Vagrant.configure<span class="o">(</span><span class="m">2</span><span class="o">)</span> <span class="k">do</span> <span class="p">|</span>config<span class="p">|</span>
    config.vm.define <span class="s2">&quot;nebuvagrantya&quot;</span> <span class="k">do</span> <span class="p">|</span>nbv<span class="p">|</span>
    nbv.vm.box <span class="o">=</span> <span class="s2">&quot;ubuntu/trusty64&quot;</span>
    nbv.vm.network :private_network, ip: <span class="s2">&quot;10.0.0.2&quot;</span>
    nbv.vm.hostname <span class="o">=</span> <span class="s2">&quot;nebuvagrantya&quot;</span>

    nbv.vm.provider <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="p">|</span>vb<span class="p">|</span>
        vb.name <span class="o">=</span> <span class="s2">&quot;Ne bu vagrant ya&quot;</span>
        vb.name <span class="o">=</span>  <span class="s2">&quot;Ne bu vagrant ya&quot;</span>
        vb.memory <span class="o">=</span> <span class="s2">&quot;512&quot;</span>
        vb.cpus <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
        vb.customize <span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span>, :id, <span class="s2">&quot;--vram&quot;</span>, <span class="s2">&quot;32&quot;</span><span class="o">]</span>
        end
    nbv.vm.provision :shell, path: <span class="s2">&quot;nginxyukle.sh&quot;</span>
        end
        end
</pre></div>


<p>Hadi çalıştıralım artık.
Terminalinize </p>
<div class="highlight"><pre><span></span>vagrant up
</pre></div>


<p>Yazarsanız eğer daha önce aynı box'ı indirmemişseniz aşağıda ki gibi bir ekran göreceksiniz.</p>
<p><strong>Not:</strong> Nginxyukle.sh dosyanızı oluşturmayı unutmayın :)
<img alt="Vagrant1" src="images/vagrant1.png"> </p>
<p>İşlemler bittikten sonra aşağıda ki gibi bir ekran göreceksiniz</p>
<p><img alt="Vagrant2" src="images/vagrant2.png"></p>
<p>Artık herşey hazır.</p>
<p>Kullanabileceğiniz komutlar:</p>
<table>
<thead>
<tr>
<th>Komut</th>
<th>Açıklama</th>
</tr>
</thead>
<tbody>
<tr>
<td>vagrant ssh</td>
<td>Eğer bir tane makineniz bulunuyorsa bu makineye direkt olarak ssh üzerinden erişir.</td>
</tr>
<tr>
<td>vagrant destroy</td>
<td>Makinenizi destroy eder.</td>
</tr>
<tr>
<td>vagrant global-status</td>
<td>Makineleriniz hakkında sizlere bilgi verir.</td>
</tr>
<tr>
<td>vagrant reload</td>
<td>Makinenizi update eder</td>
</tr>
</tbody>
</table>
<p>Komutlar ile ilgili aşağıda referans sayfası vereceğim.
SSH bağlantısı yapalım ve yazıyı sonlandıralım.
<img alt="Vagrant3" src="images/vagrant3.png"></p>
<p>Evet artık nur topu gibi bir sanal makinemiz var.
<img alt="Vagrant4" src="images/vagrant4.png"></p>
<h3>Vagrant Kutuları İçin</h3>
<p>Vagrant üzerinde kutuları kullanabileceğinizi söylemiştik.
Kullanıcılar tarafından oluşturulmuş public kutulara ulaşmak için aşağıda ki linki kullanabilirsiniz.</p>
<p><a href="https://app.vagrantup.com/boxes/search">Vagrant Boxes</a></p>
<h5>Ek Linkler</h5>
<p><a href="https://2rwky424s9rd179jmbzqsca1-wpengine.netdna-ssl.com/wp-content/uploads/2017/12/vagrant-printerfriendly.png">Vagrant CheatSheet</a></p>
<p><a href="https://www.virtualbox.org/manual/ch08.html">VBoxManage</a></p>
<p><a href="https://www.vagrantup.com/docs/cli/">Vagrant CLI</a></p>
<p><a href="https://everythingshouldbevirtual.com/virtualization/vagrant-complex-vagrantfile-configurations/">Complex VagrantFile</a></p>
    </div>

    <footer>
        <div class="tags">
            <a href="/tag/vagrant.html">vagrant</a>
            <a href="/tag/vagrant-101.html">vagrant 101</a>
            <a href="/tag/introduction-of-vagrant.html">introduction of vagrant</a>
            <a href="/tag/vagrant-dersleri.html">vagrant dersleri</a>
            <a href="/tag/vagrant-nedir.html">vagrant nedir</a>
        </div>
        <div class="pure-g post-footer">
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="pure-g poster-info">
                    <div class="pure-u-3-4">
                        <h3 class="author-name"><a href="/author/0x656e.html">0x656e</a></h3>
                        <p class="author-description">
                        </p>
                    </div>
                </div>
            </div>



        </div>


    </footer>

    <div class="entry-content">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = '0x6.pw';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

</div>



    <footer class="index-footer">

        <a href="/" title="0x6 | Junior of All">0x6 | Junior of All</a>
        <a href="/category/ansible.html">ansible</a>
        <a href="/category/python.html">python</a>
        <a href="/category/vagrant.html">vagrant</a>
        <a href="https://mertcangokgoz.com/">Mertcan Gökgöz</a>
        <a href="https://onur.im/">Onur Aslan</a>
        <a href="http://www.omeripek.com.tr/">Ömer İpek</a>
        <a href="https://canyoupwn.me/">Canyoupwn.me</a>

    </footer>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44262671-1', 'auto');
      ga('send', 'pageview');

    </script>
</body>
</html>